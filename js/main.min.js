function init(){new SliderCarousel({elementId:"background-carousel",autoSlide:!0}),new SliderCarousel({elementId:"article-carousel",autoSlide:!1}),scrollNav(),tablefilter.init("search-bar"),map.init();for(var e=document.getElementsByTagName("LABEL"),t=0;t<e.length;t++)if(""!=e[t].htmlFor){var a=document.getElementById(e[t].htmlFor);a&&(a.label=e[t])}var n=document.getElementById("article-form");n.noValidate=!0,n.addEventListener("submit",validateForm)}function scrollNav(){var e=document.body.scrollTop||document.documentElement.scrollTop,t=document.getElementById("article-top").offsetHeight,a=document.getElementsByTagName("header")[0];e>t&&(a.className="small"),window.addEventListener("scroll",function(){e=document.body.scrollTop||document.documentElement.scrollTop,e>t?a.className="small":a.className=""})}function validateForm(e){var t=!1;e=e?e:window.event;var a,n,l=e.target?e.target:e.srcElement,r=!0;for(a=0;a<l.elements.length;a++)if(n=l.elements[a],"INPUT"===n.nodeName||"TEXTAREA"===n.nodeName||"SELECT"===n.nodeName){"undefined"!=typeof n.willValidate&&n.checkValidity();var i=n.label.getElementsByClassName("error")[0];void 0==i&&(i=document.createElement("span"),i.className="error",n.label.appendChild(i)),i.innerHTML="",n.className="",n.validity.valid||(n.className="error",n.validity.valueMissing?i.appendChild(document.createTextNode(" - "+n.dataset.errorValueMissing)):n.validity.patternMismatch?i.appendChild(document.createTextNode(" - "+n.dataset.errorPatternMismatch)):n.validity.badInput?i.appendChild(document.createTextNode(" - "+n.dataset.errorBadInput)):n.validity.customError?i.appendChild(document.createTextNode(" - "+n.dataset.errorCustomError)):n.validity.stepMismatch?i.appendChild(document.createTextNode(" - "+n.dataset.errorStepMismatch)):n.validity.rangeOverflow?i.appendChild(document.createTextNode(" - "+n.dataset.errorRangeOverflow)):n.validity.rangeUnderflow?i.appendChild(document.createTextNode(" - "+n.dataset.errorRangeUnderflow)):n.validity.patternMismatch?i.appendChild(document.createTextNode(" - "+n.dataset.errorPatternMismatch)):n.validity.tooLong?i.appendChild(document.createTextNode(" - "+n.dataset.errorTooLong)):n.validity.tooShort?i.appendChild(document.createTextNode(" - "+n.dataset.errorTooShort)):n.validity.typeMismatch&&i.appendChild(document.createTextNode(" - "+n.dataset.errorTypeMismatch)),t||(window.scroll(0,n.offsetTop-120),t=!0),r=!1),n.addEventListener("change",function(e){e.target.className="",e.target.label.getElementsByClassName("error")[0].innerHTML=""},!1)}return r||e.preventDefault&&e.preventDefault(),r}window.addEventListener("load",init,!1);var tablefilter=new function(){this.filter=function(){for(var e=this.value.toLowerCase().split(" "),t=document.getElementById(this.dataset.table),a=null,n=1;n<t.rows.length;n++){a=t.rows[n].innerHTML.replace(/<[^>]+>/g,"");for(var l="hide",r=0;r<e.length;r++){if(!(a.toLowerCase().indexOf(e[r])>=0)){l="hide";break}l="show"}t.rows[n].className=l}},this.init=function(e){var t=document.getElementById(e),a=t.parentElement;"FORM"===a.nodeName&&a.addEventListener("submit",function(e){return e.preventDefault(),!1},!1),t.addEventListener("keyup",this.filter,!0)}},map=function(){var e,t,a,n,l,r,i={generateList:function(t){var a="active";l=[];for(var r=0;r<t.length;r++){var o=document.createElement("li");o.className=a,o.appendChild(document.createTextNode(t[r].formatted_address)),o.addEventListener("click",i.clickListener,!1),o.result=t[r],o.myIndex=r,l.push(o),n.appendChild(o),a=""}e.addEventListener("keydown",s.onClickInput,!1)},clickListener:function(e){i.selectedItemHandler(e)},listNavigator:function(e){var t=i._getSelectedItem();if(null!=t){var a=t.myIndex;a+e>=0&&a+e<l.length&&(t.className="",l[a+e].className="active",n.scrollTop=l[a+e].offsetTop-174)}},selectedItemHandler:function(a){var l=null;if(void 0==a?l=i._getSelectedItem():(a.preventDefault(),l=a.target),void 0==l||null==l)return null;var r=l.result;s.setMarker(t,r),e.value=r.formatted_address,n.style.display="none"},closeList:function(){n.style.display="none",n.textContent="",l=[],e.removeEventListener("keydown",s.onClickInput,!1)},_getSelectedItem:function(){var e=null;return Array.prototype.forEach.call(l,function(t){"active"==t.className&&(e=t)}),e}},s={onClickInput:function(e){switch(e.keyCode){case 38:return i.listNavigator(-1),e.preventDefault(),!1;case 40:return i.listNavigator(1),e.preventDefault(),!1;case 13:return i.selectedItemHandler(),e.preventDefault(),!1;case 27:return i.closeList(),!1}},geocodeAddress:function(t){var l=t.keyCode;if(38!=l&&40!=l&&13!=l&&27!=l){var r=e.value;r.length>3&&a.geocode({address:r},function(t,a){a===google.maps.GeocoderStatus.OK?(e.className="",n.textContent="",n.style.display="block",i.generateList(t)):(e.className="error",i.closeList())})}},setMarker:function(e,t){"undefined"!=typeof r&&r.setMap(null),e.setCenter(t.geometry.location),r=new google.maps.Marker({map:e,position:t.geometry.location})}},o={init:function(){t=new google.maps.Map(document.getElementById("map"),{zoom:11,center:{lat:52.5167,lng:13.3833}}),a=new google.maps.Geocoder,e=document.getElementById("address"),n=document.getElementById("mapResult"),e.addEventListener("focus",function(e){e.target.addEventListener("keyup",s.geocodeAddress,!1)},!1),e.addEventListener("blur",function(e){e.target.removeEventListener("keyup",s.geocodeAddress,!1),i.closeList()},!1)}};return o}();!function(){function e(){var e=this;e.carousel=document.getElementById(e.options.elementId),e.carousel.className=this.carousel.className+" slider-carousel",e.carouselClass=e.carousel.className,i.call(e),this.options.autoSlide&&t.call(this)}function t(){var e=this;e.interval=window.setInterval(l.bind(e),e.options.autoDelay)}function a(){var e=this;clearInterval(e.interval),l.call(e),this.options.autoSlide&&t.call(this)}function n(){var e=this;clearInterval(e.interval),r.call(e),this.options.autoSlide&&t.call(this)}function l(){var e=this;if(!e.clickable)return!1;e.clickable=!1,e.carousel.className=e.carouselClass+" nextSlide";var t=e.ankers[e.activeSlide];t.className="slider prev",t.addEventListener("transitionend",function(){e.carousel.className=e.carouselClass,e.clickable=!0},!1);var a=e.ankers[e.nextSlide];a.className="slider active";var n=e.ankers[e.prevSlide];n.className="slider";var l=e.ankers[e.nextSlide+1>=e.ankers.length?0:e.nextSlide+1];return l.className="slider next",e.prevSlide=e.activeSlide,e.activeSlide=e.nextSlide,e.nextSlide=e.nextSlide+1>=e.ankers.length?0:e.nextSlide+1,e}function r(){var e=this;if(!e.clickable)return!1;e.clickable=!1,e.carousel.className=e.carouselClass+" prevSlide";var t=e.ankers[e.activeSlide];t.className="slider next",t.addEventListener("transitionend",function(){e.carousel.className=e.carouselClass,e.clickable=!0},!1);var a=e.ankers[e.nextSlide];a.className="slider";var n=e.ankers[e.prevSlide];n.className="slider active";var l=e.ankers[e.prevSlide-1<0?e.ankers.length-1:e.prevSlide-1];return l.className="slider prev",e.nextSlide=e.activeSlide,e.activeSlide=e.prevSlide,e.prevSlide=e.prevSlide-1<0?e.ankers.length-1:e.prevSlide-1,e}function i(){var e=this,t=s(e.carousel.children);e.carousel.innerHTML=null;var l=document.createElement("a");l.className="nav-prev",l.appendChild(document.createTextNode("")),l.addEventListener("click",n.bind(e),!1);var r=document.createElement("a");return r.className="nav-next",r.appendChild(document.createTextNode("")),r.addEventListener("click",a.bind(e),!1),e.carousel.appendChild(l),Array.prototype.forEach.call(t,function(a,n){var l=document.createElement("a"),r=new Image;r.setAttribute("src",a.getAttribute("src")),r.onload=function(){l.style.backgroundImage="url("+a.getAttribute("src")+")";var r=l.className="slider";0==n?(l.className=r+" active",e.activeSlide=n):1==n?(l.className=r+" next",e.nextSlide=n):n==t.length-1&&(l.className=r+" prev",e.prevSlide=n)}.call(e),e.carousel.appendChild(l),e.ankers.push(l)}),e.carousel.appendChild(r),e}function s(e){return Array.prototype.slice.call(e)}function o(e,t){var a;for(a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e}this.SliderCarousel=function(){this.carousel=null,this.carouselClass=null,this.ankers=[],this.activeSlide=null,this.nextSlide=null,this.prevSlide=null,this.clickable=!0,this.interval=null;var t={elementId:"slider-carousel",autoSlide:!1,autoDelay:5e3};return arguments[0]&&"object"==typeof arguments[0]&&(this.options=o(t,arguments[0])),e.call(this),this}}();